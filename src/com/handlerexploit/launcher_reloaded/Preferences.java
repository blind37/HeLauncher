/* 
 * This program is free software. It comes without any warranty, to
 * the extent permitted by applicable law. You can redistribute it
 * and/or modify it under the terms of the Do What The Fuck You Want
 * To Public License, Version 2, as published by Sam Hocevar. See
 * http://sam.zoy.org/wtfpl/COPYING for more details.
 */

package com.handlerexploit.launcher_reloaded;

import android.os.Bundle;
import android.preference.Preference;
import android.preference.Preference.OnPreferenceChangeListener;
import android.preference.PreferenceActivity;

public class Preferences extends PreferenceActivity implements OnPreferenceChangeListener {
	private static Launcher mLauncher;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
        findPreference(getResources().getString(R.string.preference_1_key)).setOnPreferenceChangeListener(this);
        findPreference(getResources().getString(R.string.preference_2_key)).setOnPreferenceChangeListener(this);
        findPreference(getResources().getString(R.string.preference_3_key)).setOnPreferenceChangeListener(this);
    }
    
    @Override
	public boolean onPreferenceChange(final Preference preference, final Object newValue) {
		if (preference.getKey().equals(getResources().getString(R.string.preference_3_key)) && mLauncher != null)
			mLauncher.finish();
		Styles.sharedPref.edit().putBoolean(preference.getKey(), ((Boolean) newValue).booleanValue()).commit();
		return true;
	}
    
    public static void setLauncher(Launcher launcher) {
    	mLauncher = launcher;
    }
	
	public void onBackPressed() {
		finish();
	}
}